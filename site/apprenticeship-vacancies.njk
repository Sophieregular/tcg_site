---
layout: "layouts/default.njk"
title: Apprentice Job Ad Index
slug: {{job.jobTitle}}
---

{# banner #}
<div class="bg-grey-50 h-full">
  <div class="hero relative bg-grey-100 w-full mx-auto">
    <img src="../images/banner-1.png" alt="Apprenticeships hero image"
      class="md:block hidden h-full w-full hero-desktop" />
    <img src="../images/banner-2.png" alt="Apprenticeships hero image"
      class="md:hidden block h-full w-full hero-mobile" />
    <div class="absolute top-0 w-full h-full">
      <div class="flex flex-col justify-center items-center w-full h-full">
        <div class="max-w-2xl mx-auto px-4 lg:mb-8">
          <h1 class="text-center text-white mb-0 text-5xl leading-5xl max-w-md md:max-w-full">Find Your Dream
            Apprenticeship</h1>
        </div>
        <div>
          <div class="mt-4 flex rounded-md shadow-sm w-full justify-self-center align-self-center">
            <div class="relative">
              <input type="text" name="search" id="search" class="w-full rounded-l-lg pl-4 py-4 sm:text-sm"
                placeholder="Search a keyword...">
            </div>
            <button type="button" id="searchBtnJobIndex"
              class="-ml-px relative inline-flex items-center space-x-2 px-4 py-2 text-sm font-medium rounded-r-md text-gray-700 bg-gray-50 hover:bg-gray-100 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 rounded-r-lg">Search
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>




  {# main section ---- #}

<main class="main inner flex flex-1 flex-col focus:outline-none" tabindex="-1">
{# check the below div - no closing tag but stopping column display for main#}
    <div class="flex flex-wrap justify-center">
    {# main left filter section ------#}
      <div class="w-full md:w-1/5 h-full">
        <div class="flex justify-between items-center mt-6">
          <h5 class="text-lg mb-0">Filters</h5>
          <div class="resetIcon flex items-center">
            <img src="../images/apprenticeJobAd/restart_alt_black_24dp.svg" class="h-8 p-2">
            <h5 class="text-xs mb-0">Reset Filters</h5>
          </div>
        </div>

        {# this div is preventing display as column but does not have a closing tag???#}
        <div class="w-full filterOptions">
        {#---------------------------------#}
        <div class="flex-col mr-4 text-md">
          <div class="filter-form mt-4">


            {# <p class="font-bold text-xs">Type of employment</p>
            <div>
              <input type="checkbox" class="employment-type" name="apprenticeship" value="apprenticeship"
                class="transform scale-150">
              <label for="apprenticeship" class="ml-1 text-xs"> Apprenticeship</label>
            </div>  #}
            {# main left section locations ----- #}



            <p class="font-bold">Location</p>
            <div>
              <input type="checkbox" class="location" name="location" value="Greater London"
                class="transform scale-150">
              <label for="location" class="ml-1">Greater London</label>
            </div>
             <div>
              <input type="checkbox" class="location" name="location" value="South East England"
                class="transform scale-150">
              <label for="location" class="ml-1"> South East England</label>
            </div>
            <div>
              <input type="checkbox" class="location" name="location" value="South West England"
                class="transform scale-150">
              <label for="location" class="ml-1">South West England</label>
            </div>
             <div>
              <input type="checkbox" class="location" name="location" value="West Midlands"
                class="transform scale-150">
              <label for="location" class="ml-1">West Midlands</label>
            </div>
             <div>
              <input type="checkbox" class="location" name="location" value="East Midlands"
                class="transform scale-150">
              <label for="location" class="ml-1">East Midlands</label>
            </div>
              <div>
              <input type="checkbox" class="location" name="location" value="North West England"
                class="transform scale-150">
              <label for="location" class="ml-1">North West England</label>
            </div>
               <div>
              <input type="checkbox" class="location" name="location" value="North East England"
                class="transform scale-150">
              <label for="location" class="ml-1">North East England</label>
            </div>
               <div>
              <input type="checkbox" class="location" name="location" value="East of England"
                class="transform scale-150">
              <label for="location" class="ml-1">East of England</label>
            </div>
                <div>
              <input type="checkbox" class="location" name="location" value="Yorkshire and the Humber"
                class="transform scale-150">
              <label for="location" class="ml-1">Yorkshire and the Humber</label>
            </div>

            {#end of main location filter section ----- #}


            {#-------apprenticeship standard#}
            {# <p class="font-bold text-xs">Apprenticeship Standard</p>
            <div>
              <input type="checkbox" class="apprentince-standard" name="apprentince standard"
                value="software developer level 4" class="transform scale-150">
              <label for="apprentince standard" class="ml-1 text-xs"> Software developer level 4</label>
            </div>
            <div>
              <input type="checkbox" class="apprentince-standard" name="apprentince standard"
                value="software developer level 3" class="transform scale-150">
              <label for="apprentince standard" class="ml-1 text-xs"> Software developer level 3</label>
            </div>
            <div>
              <input type="checkbox" class="apprentince-standard" name="apprentince standard"
                value="software tester level 3" class="transform scale-150">
              <label for="apprentince standard" class="ml-1 text-xs"> Software tester level 3</label>
            </div>
            <div>
              <input type="checkbox" class="apprentince-standard" name="apprentince standard"
                value="accessibilty specialist level 4" class="transform scale-150">
              <label for="apprentince standard" class="ml-1 text-xs"> Accessibilty specialist level 4</label>
            </div>
            <div>
              <input type="checkbox" class="apprentince-standard" name="apprentince standard" value="data analyst level 4"
                class="transform scale-150">
              <label for="apprentince standard" class="ml-1 text-xs"> Data analyst level 4</label>
            </div> #}

            {# end of standard -------- #}

            {# salary range----- #}
            {# <div>

              <p class="font-bold text-xs">Salary Range</p>
              <label for="salary range" class="text-xs">£24k-£36k</label>
              <input class="rounded-lg overflow-hidden appearance-none bg-grey-700 w-full h-1" type="range" min="18"
                max="100" step="1" value="18" />
              <div class="flex flex-row justify-between">
                <p class="flex text-xs">£18k</p>
                <p class="flex text-xs">100k</p>
              </div>
            </div> #}

            {# end of salary range #}


            <p class="font-bold">Disability confident employer</p>
            <div>
              <input type="checkbox" class="disability-confident-employer" name="disability confident employer" value="true"
                class="transform scale-150">
              <label for="disability-confident-employer" class="ml-1"> Yes</label>
            </div>
            <div>
              <input type="checkbox" class="disability-confident-employer" name="disability confident employer" value="false"
                class="transform scale-150">
              <label for="disability confident employer" class="ml-1"> No</label>
            </div>
            <div>
              <input type="checkbox" class="disability-confident-employer" name="disability confident employer" value="in_progress" class="transform scale-150">
              <label for="disability confident employer" class="ml-1"> In Progress</label>
            </div>
          </div>
        </div>
        </div>
      </div>


      {# main right filter section -----#}
      <div class="md:w-4/5 w-full h-full md:px-6">
        <div class="flex justify-between items-center mt-6">
          <h5 class="mb-0">Showing: <span class="showing"></span></h5>
          <div class="flex items-center">
            <h5 class="text-xs mb-0">Sort By</h5>
            <select name="sort-by" class="mx-2 w-full h-8 md:w-48 rounded-lg border-2 border-blue-300 text-xs">
              <option value="A-Z">A-Z</option>
              <option value="location">location</option>
              <option value="salary">Salary</option>
            </select>
            <img class="w-8" src="../images/apprenticeJobAd/grid_view_black_24dp.svg">
            <img src="../images/apprenticeJobAd/list_black_24dp.svg">
          </div>
        </div>


{# apprentceship vancancy job card ----- #}

{% for job in apprenticeJobAds %}

<div class="main-container singleAd {{ job.disabilityConfident }} {{job.location | join}} flex flex-col">
 <div class="card-container  bg-white my-4 p-8 rounded-lg shadow-xl">

  <div class="top-row flex flex-row justify-between">
    <div style="background-image: url('{{job.employerLogo}}'); background-size: cover; background-repeat: no-repeat; background-position: center;" alt="{{job.jobTitle}}" class="w-24 h-24"></div>
    <span class="font-bold p-0 m-0">£{{job.salary}}</span>
  </div>

  <div class="title-and-biz">
    <h3 class="p-0 mb-4">{{job.jobTitle}}</h3>
    <h5 class="p-0 mb-4">{{job.employerName}}</h5>
  </div>

  <div class="bottom-row flex flex-row">
    <img src="../images/apprenticeJobAd/place_black_24dp.svg" alt="location-icon" class="flex p-0"><span class="mr-4 flex">{{job.location}}</span>
    <img src="../images/apprenticeJobAd/date_range_black_24dp.svg" alt="clock-icon" class="flex">
    <span class="flex">{{job.closingDate | dateDisplay}}</span>
  </div>

  <div class="job-description">
  <p class="text-sm truncate">{{job.briefOverview}}</p>
  </div>

  <div class="apply-btn find-out-more-btn flex flex-row">

  <a class="mt-auto mr-8 py-2 px-4 bg-blue-200 text-md font-bold font-heading rounded text-white" href="" style="color:white;">Apply Now</a>
   <a class="mt-auto py-2 px-4 bg-white text-md font-bold font-heading rounded border border-blue-200" href="/jobAdSingle/{{ job.slug.current }}/index.html" target="_blank" style="color:#2574a9;">Find Out More</a>
  </div>

 </div>
</div>

        {% endfor %}








        {# {% for job in apprenticeJobAds %}
        <div class="singleAd w-full h-full my-4 flex justify-center rounded-lg pb-4 bg-white flex-col">
        <div class="flex align-middle justify-center m-4 center">
          <div class="w-full h-auto rounded-lg mx-4 my-4 shadow-xl border-grey-200 p-8 bg-white">
            <div class="w-full h-auto rounded-t-lg flex flex-row">
              <div class="mx-2 flex justify-center pt-6 h-20 w-20 border-grey-200 border-2 rounded-lg">
                <img class="flex h-10 w-10" src="{{job.employerLogo}}">
              </div>
              <div class="md:w-4/5 mx-2 my-2">
                <div class="flex justify-between ml-1">
                  <h5 class="flex text-lg text-blue-700 m-0 p-0">{{job.jobTitle}}</h5>
                  <p class="flex text-xs font-bold mr-2">£{{job.salary}}</p>
                </div>
                <p class="ml-1 text-xs font-bold text-blue-700">{{job.employerName}}</p>
                <div class="flex flex-row">
                  <div class="flex">
                    <img src="../images/apprenticeJobAd/schedule_black_24dp.svg">
                    <p class="text-xs">{{job.contract}}</p>
                  </div>
                  <div class="flex ml-8">
                    <img src="../images/apprenticeJobAd/place_black_24dp.svg">
                    <p class="flex text-xs">{{job.location}}</p>
                  </div>
                  <div class="flex ml-8">
                    <img src="../images/apprenticeJobAd/date_range_black_24dp.svg">
                    <p class="flex text-xs"><span class="font-bold">Closing date: </span> {{job.closingDate | dateDisplay}}</p>
                  </div>
                </div>
              </div>
            </div>
              <div class=" w-full md:w-4/5 h-20 mx-2 my-2 overflow-hidden">
                <p class="truncate text-xs">{{job.briefOverview}} </p>
                  <div class="mb-4 mt-2 flex flex-row">
                <div class="flex">
                  <button class="w-auto h-auto bg-blue-200 text-white rounded-lg p-2 mx-1"> Apply Now</button>
                   <a href="/apprenticeship-vacancies/{{ job.slug.current }}/" class="applyBtn">
                  <button class="w-auto h-auto bg-blue-200 text-white rounded-lg p-2 mx-1"> Find out more</button>
                  </a>
                </div>
              </div>
            </div>
          </div>
          <div>
          </div>
        </div>
        </div>
        {% endfor %} #}
      </div>
    </div>
  </main>


<script>
const filterOptions = document.querySelector('.filterOptions')
const searchBar = document.querySelector('#search')
const searchBtn = document.querySelector('#searchBtnJobIndex')
const disabilityCheckbox = document.querySelectorAll('.disability-confident-employer')
const locationCheckbox = document.querySelectorAll('.location')
const employmentTypeCheckbox = document.querySelectorAll('.employment-type')
const resetIcon = document.querySelector('.resetIcon')
const singleAd = Array.from(document.querySelectorAll('.singleAd'))
let locationArray = []
let disabilityArray = []
//an empty array to push the selected locations to so i can check if some of the locations are inlcuded in the single ad array

function join(string){
    return string.replace(/\s+/g, '-').toLowerCase()
}
//a function to replace any white space with a '-' and then make lowercase.this is so when we add a class using the location any locations with more than one word is used as one class and not two. Eg. South West will be 'south-west' and not 'South' 'West'

filterOptions.addEventListener('change', e => {
  //filter options is the container div for all the checkboxes.the event listener listens for any change, check/uncheck
if(e.target.classList.contains('location')){
  let selectedLocation = join(e.target.value)
    if(e.target.checked) {
      locationArray.push(selectedLocation)
    } else if (!e.target.checked){
      let index = locationArray.indexOf(selectedLocation)
      locationArray.splice(index, 1)
    }
} else if(e.target.classList.contains('disability-confident-employer')){
    let checkboxValue = join(e.target.value);

    if(e.target.checked){
    disabilityArray.push(checkboxValue)
    } else if(!e.target.checked) {
        let index = disabilityArray.indexOf(checkboxValue)
        disabilityArray.splice(index, 1)
    }
  }
})

jobAd.forEach(job => {

})

resetIcon.addEventListener('click', e => {
  disabilityArray = []
  locationArray = []

  singleAd.forEach(ad => {
    ad.classList.remove('hidden')
    ad.classList.add('flex')
  })

  locationCheckbox.forEach(box => {
    box.checked = false
  })

  disabilityCheckbox.forEach(box => {
    box.checked = false
  })
  displayNumVacancies()
})



let searchString = ''
let filteredAds = []
let filteredbyCheckbox = []



searchBar.addEventListener('keyup', e => {
searchString = e.target.value
console.log(searchString)
return searchString.toLowerCase()
})



function filteredJobs() {
  const filtered = jobAd.filter(job => job.title.toLowerCase().includes(searchString) || job.location.toLowerCase().includes(searchString) || job.employer.toLowerCase().includes(searchString) || job.standard.toLowerCase().includes(searchString))
  filteredAds.push(filtered)
  displayNumVacancies()
}

searchBtn.addEventListener('click', e => {
  filteredJobs()
  displayNumVacancies()
})

function displayNumVacancies(){
  const ads = document.querySelectorAll('.singleAd.flex');
  console.log(ads)
  const display = document.querySelector('.showing')

  display.innerHTML = ads.length;
}

displayNumVacancies()
</script>